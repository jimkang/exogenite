var test = require('tape');
var parseMap = require('../parse-map');
var expectedItems = require('./fixtures/parse-map-test-expected.json');

var mapDef = `..................
..................
..................
..................
.........Bm.......
......P...P.......
....W.............
..................
..................
.............m....
..................
..................`;

test('Parse that map!', parseTest);

function parseTest(t) {
  var treeItems = parseMap({mapDef: mapDef, makeSoul: simpleSoul});
  // console.log(JSON.stringify(treeItems, null, '  '));
  t.deepEqual(treeItems, expectedItems, 'Parsed items are correct.');
  t.end();
}

function simpleSoul({key, baseLocation}) {
  return {
    key: key,
    figures: [baseLocation]
  };
}
